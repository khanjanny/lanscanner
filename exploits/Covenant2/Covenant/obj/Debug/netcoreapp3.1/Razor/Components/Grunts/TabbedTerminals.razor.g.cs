#pragma checksum "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "ccc4d3610cf5bf9c3a4be950f56d007fca4ee5a9"
// <auto-generated/>
#pragma warning disable 1591
namespace Covenant.Components.Grunts
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
#nullable restore
#line 1 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/_Imports.razor"
using Microsoft.AspNetCore.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/_Imports.razor"
using Covenant.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
using Covenant.Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
using Covenant.Models.Covenant;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
using Covenant.Models.Grunts;

#line default
#line hidden
#nullable disable
    public partial class TabbedTerminals : OwningComponentBase<ICovenantService>, IDisposable
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
#nullable restore
#line 13 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
 if (this.TerminalGrunts.Any())
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(0, "    ");
            __builder.OpenElement(1, "ul");
            __builder.AddAttribute(2, "id", "terminals-tab");
            __builder.AddAttribute(3, "class", "nav nav-tabs mb-3");
            __builder.AddAttribute(4, "style", "margin-top: 6rem;");
            __builder.AddAttribute(5, "role", "tablist");
            __builder.AddMarkupContent(6, "\n");
#nullable restore
#line 16 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
         for (int i = 0; i < TerminalGrunts.Count(); i++)
        {
            int number = i;

#line default
#line hidden
#nullable disable
            __builder.AddContent(7, "            ");
            __builder.OpenElement(8, "li");
            __builder.AddAttribute(9, "class", "nav-item");
            __builder.AddMarkupContent(10, "\n                ");
            __builder.OpenElement(11, "a");
            __builder.AddAttribute(12, "class", "nav-link d-flex flex-row justify-content-start pr-0");
            __builder.AddAttribute(13, "id", "terminal-tab-" + (
#nullable restore
#line 20 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                                                                                 number

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "data-toggle", "tab");
            __builder.AddAttribute(15, "href", "#terminal-" + (
#nullable restore
#line 20 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                                                                                                                            number

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(16, "role", "tab");
            __builder.AddAttribute(17, "aria-controls", "terminal-" + (
#nullable restore
#line 20 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                                                                                                                                                                        number

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(18, "aria-selected", "false");
            __builder.AddMarkupContent(19, "\n                    <span class=\"fe fe-terminal\"></span>\n                    ");
            __builder.OpenElement(20, "span");
            __builder.AddAttribute(21, "class", "ml-1 mr-2");
            __builder.AddContent(22, 
#nullable restore
#line 22 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                             TerminalGrunts[number].Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(23, "\n                    ");
            __builder.OpenElement(24, "div");
            __builder.AddAttribute(25, "class", "text-muted text-decoration-none mr-2");
            __builder.AddAttribute(26, "style", "margin-top: -0.1rem;");
            __builder.AddAttribute(27, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 23 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                                                                                             e => OnRemoveTerminal.InvokeAsync(number)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(28, "\n                        <span class=\"fe fe-x\" style=\"font-size: 0.88rem;\"></span>\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(29, "\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(30, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(31, "\n");
#nullable restore
#line 28 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(32, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(33, "\n");
            __builder.AddContent(34, "    ");
            __builder.OpenElement(35, "div");
            __builder.AddAttribute(36, "class", "tab-content");
            __builder.AddAttribute(37, "id", "terminal-tab-content");
            __builder.AddMarkupContent(38, "\n");
#nullable restore
#line 32 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
         for (int i = 0; i < TerminalGrunts.Count(); i++)
        {
            int number = i;

#line default
#line hidden
#nullable disable
            __builder.AddContent(39, "            ");
            __builder.OpenElement(40, "div");
            __builder.AddAttribute(41, "class", "tab-pane fade mb-5");
            __builder.AddAttribute(42, "id", "terminal-" + (
#nullable restore
#line 35 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                                          number

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(43, "role", "tabpanel");
            __builder.AddAttribute(44, "aria-labelledby", "terminal-tab-" + (
#nullable restore
#line 35 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                                                                                                 number

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(45, "\n");
#nullable restore
#line 36 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                 if (!string.IsNullOrWhiteSpace(this.TerminalGrunts[number].Note))
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(46, "                    ");
            __builder.OpenElement(47, "p");
            __builder.AddMarkupContent(48, "<b>Note</b>: ");
            __builder.AddContent(49, 
#nullable restore
#line 38 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                     this.TerminalGrunts[number].Note

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\n");
#nullable restore
#line 39 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(51, "                ");
            __builder.OpenComponent<Covenant.Components.Grunts.GruntInteractTerminal>(52);
            __builder.AddAttribute(53, "Grunt", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Covenant.Models.Grunts.Grunt>(
#nullable restore
#line 40 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                              TerminalGrunts[number]

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(54, "OnInteract", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Tuple<Covenant.Models.Grunts.Grunt, System.String>>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Tuple<Covenant.Models.Grunts.Grunt, System.String>>(this, 
#nullable restore
#line 40 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
                                                                                  OnInteract

#line default
#line hidden
#nullable disable
            )));
            __builder.CloseComponent();
            __builder.AddMarkupContent(55, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(56, "\n");
#nullable restore
#line 42 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(57, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(58, "\n");
#nullable restore
#line 44 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 46 "/root/nk/Github/lanscanner/exploits/Covenant/Covenant/Components/Grunts/TabbedTerminals.razor"
       
    [Parameter]
    public List<Grunt> TerminalGrunts { get; set; } = new List<Grunt>();

    [Parameter]
    public EventCallback<List<Grunt>> TerminalGruntsChanged { get; set; }

    [Parameter]
    public EventCallback<int> OnRemoveTerminal { get; set; }

    [CascadingParameter]
    private Task<AuthenticationState> AuthenticationState { get; set; }

    private CovenantUser CurrentUser { get; set; }
    private string ShowTab { get; set; } = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        this.CurrentUser = await Service.GetCurrentUser((await this.AuthenticationState).User);
        this.INotificationService.OnEditGrunt += OnEditGrunt;
        Service.DisposeContext();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (this.ShowTab != string.Empty)
        {
            await IJSRuntime.InvokeAsync<string>("ShowTab", ShowTab);
            this.ShowTab = string.Empty;
        }
    }

    public void Dispose()
    {
        this.INotificationService.OnEditGrunt -= OnEditGrunt;
    }

    private void OnEditGrunt(object sender, Grunt grunt)
    {
        if (this.TerminalGrunts.Any(G => G.Id == grunt.Id))
        {
            this.TerminalGrunts[this.TerminalGrunts.FindIndex(G => G.Id == grunt.Id)] = grunt;
            this.InvokeAsync(() => this.StateHasChanged());
        }
    }

    public void OnSelectTerminal(Grunt grunt)
    {
        int index = this.TerminalGrunts.FindIndex(G => G.Id == grunt.Id);
        if (index == -1)
        {
            this.TerminalGrunts.Add(grunt);
            index = this.TerminalGrunts.Count() - 1;
        }
        this.ShowTab = $"#terminal-tab-{index}";
        this.TerminalGruntsChanged.InvokeAsync(this.TerminalGrunts);
        this.StateHasChanged();
    }

    private async Task OnInteract(Tuple<Grunt, string> tuple)
    {
        GruntCommand command = await Service.InteractGrunt(tuple.Item1.Id, this.CurrentUser.Id, tuple.Item2);
        Service.DisposeContext();
        this.StateHasChanged();
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private INotificationService INotificationService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime IJSRuntime { get; set; }
    }
}
#pragma warning restore 1591
