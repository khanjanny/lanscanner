#!/usr/bin/env python
# ARP scan Networks 
from subprocess import Popen, PIPE
import time
import commands
import sys

ip_file=sys.argv[1]

f = open(ip_file) 
for line in iter(f):
	ip = line.rstrip() # delete new line
	print "\tScanning %s " %(ip)
	status,stdout = commands.getstatusoutput("nmap -p 139,445 -P0 -n "+ip)	
	print stdout
	if "open" in stdout: 
		print "\t\t+Nice we have an smb port open, scanning with enum4linux"
		commands.getstatusoutput("enum4linux -U -G -o -r -n -P -R 0-25,500-525,1000-1025,3000-3025 "+ip+" > "+ip+".txt 2>/dev/null")
	else:
		commands.getstatusoutput("touch "+ip+".txt")
