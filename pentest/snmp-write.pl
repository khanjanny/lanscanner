#!/usr/bin/perl
# Test if we have write access with the community string
use strict;       
use Net::FTP;
use Getopt::Std;


my %opts;
getopts('t:c:h', \%opts);

my $community = $opts{'c'} if $opts{'c'};
my $target = $opts{'t'} if $opts{'t'};


sub usage
{
  printf "\nUsage :\n";
  printf "perl snmp-write.pl -t {ip} -c {comunnity} \n\n";
  printf "";  
  exit(1);
}

# Print help message if required
if ($opts{'h'} || !(%opts)) {
	usage();
	exit 0;
}

#print "snmpset -v 1 -c $community $target 1.3.6.1.2.1.1.4.0 s 'contact'","\n";
my $result = `snmpset -v 1 -c $community $target 1.3.6.1.2.1.1.4.0 s "contactx"`;

#print $result,"\n";

printf "Community string: $community ";

 if($result =~ /contactx/m){
    print "(Lectura y escritura) \n";
}
else{
    print "(Solo lectura) \n";
}





